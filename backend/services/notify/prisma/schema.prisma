generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}


// =============== Enums ===============
enum NotificationStatus {
  UNREAD
  READ
  ARCHIVED
  DELETED
}

enum NotificationType {
  INFO         
  SUCCESS      
  WARNING      
  ERROR        
  ALERT        
  FRIEND       
  TOURNAMENT   
  CHAT         
}

enum NotificationTitle {
  FRIEND_REQUEST        
  FRIEND_ACCEPTED       
  CHAT_MESSAGE          
  TOURNAMENT_REGISTERED 
  TOURNAMENT_STARTED    
  TOURNAMENT_FINISHED   
  MATCH_STARTED         
  MATCH_FINISHED        
}



// =============== User Model ===============
model User {
  id          String   @id @default(cuid())

  userId      String   @unique
  username    String   
  firstName   String
  lastName    String?
  isVerified  Boolean  @default(false)
  avatar      String   

  notifications Notification[]

  createdAt   DateTime @default(now())
}


// =============== Notification Model ===============
model Notification {
  id        Int      @id @default(autoincrement())

  userId    String       
  message   String

  type      NotificationType   @default(INFO)
  isRead    Boolean            @default(false)

  user      User         @relation(fields: [userId], references: [userId], onDelete: Cascade)

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}


// =============== Notification Settings Model ===============
model NotificationSettings {
  id                String @id @default(cuid())
  preferencesId     String @unique

  friendRequests    Boolean @default(true)
  chatMessages      Boolean @default(true)
  gameInvites       Boolean @default(true)
  tournamentUpdates Boolean @default(true)

  preferences ProfilePreferences @relation(fields: [preferencesId], references: [id], onDelete: Cascade)
}
